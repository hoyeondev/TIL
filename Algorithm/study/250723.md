# Arduino 센서 연동 실습

## 1. 초음파 센서(HC-SR04) 연결
- 참고 문서 : [아두이노 공식문서](https://projecthub.arduino.cc/Isaac100/getting-started-with-the-hc-sr04-ultrasonic-sensor-7cabe1)
- 회로 연결 후 시리얼 플로트로 센서값 확인
  
  <img width="800" height="400" alt="image" src="https://github.com/user-attachments/assets/8e96a853-439c-44e5-9ca5-a981de8eda10" />
- ⚠️ 아두이노 IDE에서 보드, 포트를 먼저 설정해야 한다.

  <img width="322" height="371" alt="image" src="https://github.com/user-attachments/assets/bfcebb24-2056-4452-a26d-99afb36a48aa" />


## 2. serial 데이터 다운로드(log)
- PuTTY 사용 : [다운로드 링크](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html)
- `Logging`, `Session` 메뉴에서 설정값 세팅

  <img width="800" height="500" alt="image" src="https://github.com/user-attachments/assets/1bf0a10a-79d3-4e97-b157-3fd6c6e7d16c" />

- ⚠️ 아두이노의 시리얼 모니터는 끈 상태에서 실행해야 함

## 3. python으로 serial 데이터 받기
- 참고 문서 : [pysirial github](https://github.com/pyserial/pyserial)

#### 예제1) serial 기본 python 코드
<details>
<summary>코드 보기 🔽</summary>

```python
import serial
import time

# 전역 변수
connection = None
current_distance = 0

def connect_sensor(port='COM3'):
    global connection
    try:
        connection = serial.Serial(port, 9600)
        time.sleep(2)
        print("연결 성공")
        return True
    except:
        print("연결 실패")
        return False
    
def read_distance():
    global connection, current_distance
    if connection and connection.in_waiting > 0:
        data = connection.readline().decode().strip()
        try:
            distance = float(data)
            current_distance = distance
            return distance
        except:
            pass
        return None
    
    
def main():
    if connect_sensor():
        for i in range(10):
            dist = read_distance()
            if dist:
                print(f"거리 : {dist}cm")
            time.sleep(0.5)
            

if __name__ == "__main__":
    main()
```
</detail>

